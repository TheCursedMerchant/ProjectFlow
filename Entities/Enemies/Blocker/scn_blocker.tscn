[gd_scene load_steps=6 format=2]

[ext_resource path="res://Entities/Enemies/Blocker/proto_player.png" type="Texture" id=1]
[ext_resource path="res://Engine/scr_hurtbox.gd" type="Script" id=2]

[sub_resource type="GDScript" id=1]
script/source = "# Test entity for collision 
extends \"res://Entities/scr_entity.gd\"
var points = 100
var spawner

signal entity_died

func take_damage(damage : int):
	health_points -= damage
	
func _process(delta): 
	if ( health_points <= 0 ):
		die()
		
func die() :
	emit_signal(\"entity_died\")
	global.current_score += points
	queue_free()

func _on_Hurtbox_body_entered(body):
	if (body.is_in_group(\"Player\") && body.dash_hit ):
		body.emit_signal(\"player_shake\", .35 , 20, 20) 
		take_damage(body.dash_damage)
"

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 15.6023, 15.9471 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 13.1944, 13.7096 )

[node name="Blocker" type="KinematicBody2D"]
script = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="Move_HitBox" type="CollisionShape2D" parent="." groups=[
"Enemy",
]]
visible = false
shape = SubResource( 3 )

[node name="Hurtbox" type="Area2D" parent="." groups=[
"Enemy",
]]
editor/display_folded = true
visible = false
scale = Vector2( 1.16, 1.12 )
collision_mask = 2
script = ExtResource( 2 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource( 4 )
[connection signal="body_entered" from="Hurtbox" to="." method="_on_Hurtbox_body_entered"]
